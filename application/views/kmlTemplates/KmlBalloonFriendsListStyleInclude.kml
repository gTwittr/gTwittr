<?php $imgPath = 'http://' . HOST_NAME . '/application/views/images/placemark/'; ?>
<BalloonStyle>
  <!-- a background color for the balloon -->
  <bgColor>2d1E1E1E</bgColor>
  <!-- styling of the balloon text -->
  <text><![CDATA[
	<style type="text/css">
		.container {
		
			font-family: Georgia, "Times New Roman", Times, serif;
			font-size: 24px;
			font-weight: normal;
			color: #000;
		}
		
		.sidenav{
			height: 168px;
			width:111px;
			float:left;
		}
		
		.btns{
			width:33px;
			padding-top:10px;
			padding-bottom:20px;
		}
		.mb_borders {
			height: 10px;
			width: 286px;
		}
		
		.mb_text {
			background:#FFF;
			width:256px;
			padding:5px 15px;
		}
		
		.messageBox{
			width:286px;
			float:left;
		}
		.text_reply{
			color:#504c4c
		}
		
		.text_sender{
			color:#ffba0f;
			font-weight:bold;
		}
	</style>
	
	<?php include(BASE_PATH . '/views/javascript/pagination.js'); ?>
	
	<script type="text/javascript" charset="utf-8">

		const ITEMS_PER_PAGE = 2;

		var friends = $[FriendOverviewSchema/list];

		function handlePaginationClick(new_page_index, pagination_container) {
			
			// This selects 20 elements from a content array
			var pagedItems = "";
			var new_array_index = new_page_index * ITEMS_PER_PAGE;
			var max_new_elements = new_array_index + ITEMS_PER_PAGE;
			
			for (var i = new_array_index; i < max_new_elements; i++) {
				var friend = null;
				if (friend = friends[i]) {
					pagedItems += '<div class="list_item">' + friend.screen_name + ' <a href="' + friend.link + '">&raquo;</a>' + friend.link + '</div>';
				}
			}
			
			$("#friends .list").html(pagedItems);
			
		   return false;
		}
		
	$(document).ready(function() {
		$("#friends .pagination").pagination(friends.length, {
			prev_text:"&laquo",
			next_text:"&raquo;",
			items_per_page:ITEMS_PER_PAGE, 
			callback:handlePaginationClick
		});
		handlePaginationClick(0,null);
	});
	</script>

	<table width="450" border="0" cellspacing="0" cellpadding="0">
		<tr>
			<td>
			<div class="container">
				<div class="sidenav">
					<div>
						<img src="<?php echo $imgPath; ?>bird.png" width="111" height="68" />
					</div>
					<div class="btns" style="float:left">
						<img src="<?php echo $imgPath; ?>prev_btn.png" width="33" height="28" />
					</div>
					<div class="btns" style="float:left; padding-left:30px">
						<img src="<?php echo $imgPath; ?>next_btn.png" width="33" height="28" />
					</div>
					<div>
						<img src="<?php echo $imgPath; ?>overview_btn.png" width="96" height="27" />
					</div>
					<div style="clear:both"></div>
				</div>
				<div class="messageBox">
					<div class="mb_borders">
						<img src="<?php echo $imgPath; ?>msg_top.png" width="286" height="10" />
					</div>
					<div class="mb_text">
						<div class="text_sender">$[FriendOverviewSchema/header]</div>
						<div id="friends">
							<div class="header"></div>
							<div class="list"></div>
							<div class="pagination"></div>
						</div>
					</div>
					<div class="mb_borders">
						<img src="<?php echo $imgPath; ?>msg_bottom.png" width="286" height="10" />
					</div>
				</div>
				<div style="clear:both"></div>
			</div>
			</td>
		</tr>
		<tr>
		<td>&nbsp;</td>
		</tr>
	</table>
  ]]>
  </text>
</BalloonStyle>